{"ast":null,"code":"var _jsxFileName = \"D:\\\\smart_city_communication_hub\\\\frontend\\\\src\\\\components\\\\CityMap.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport styled from 'styled-components';\nimport { createCustomDeviceIcon, createEdgeNodeIcon, createAlertIcon } from './DeviceIcons';\n\n// Fix for default markers in React Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst MapWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  position: relative;\n\n  .leaflet-container {\n    height: 100%;\n    width: 100%;\n    background: #f0f2f5;\n  }\n`;\n_c = MapWrapper;\nconst MapControls = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\n_c2 = MapControls;\nconst ControlButton = styled.button`\n  padding: 8px 12px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: 500;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 1);\n  }\n`;\n_c3 = ControlButton;\nconst Legend = styled.div`\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n  z-index: 1000;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 10px;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  font-size: 12px;\n  min-width: 200px;\n`;\n_c4 = Legend;\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 4px 0;\n  \n  &::before {\n    content: '';\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n    background: ${props => props.color};\n    margin-right: 8px;\n  }\n`;\n\n// Enhanced legend with better visual representation\n_c5 = LegendItem;\nconst deviceTypeInfo = {\n  CCTV: {\n    color: '#4CAF50',\n    icon: 'üìπ',\n    name: 'CCTV Cameras'\n  },\n  TrafficSensor: {\n    color: '#2196F3',\n    icon: 'üö¶',\n    name: 'Traffic Sensors'\n  },\n  WasteBinSensor: {\n    color: '#9C27B0',\n    icon: 'ÔøΩÔ∏è',\n    name: 'Waste Bin Sensors'\n  },\n  SmartStreetlight: {\n    color: '#FFC107',\n    icon: 'üí°',\n    name: 'Smart Street Lights'\n  },\n  PollutionSensor: {\n    color: '#795548',\n    icon: 'üå°Ô∏è',\n    name: 'Pollution Sensors'\n  },\n  WaterQualitySensor: {\n    color: '#00BCD4',\n    icon: 'üíß',\n    name: 'Water Quality'\n  },\n  NoiseSensor: {\n    color: '#E91E63',\n    icon: 'üîä',\n    name: 'Noise Sensors'\n  },\n  ParkingSensor: {\n    color: '#3F51B5',\n    icon: 'üÖøÔ∏è',\n    name: 'Parking Sensors'\n  }\n};\nfunction MapUpdater({\n  devices,\n  edgeNodes,\n  alerts,\n  onDeviceClick\n}) {\n  _s();\n  const map = useMap();\n  const markersRef = useRef([]);\n  useEffect(() => {\n    // Clear existing markers\n    markersRef.current.forEach(marker => {\n      map.removeLayer(marker);\n    });\n    markersRef.current = [];\n\n    // Add device markers with enhanced custom icons\n    devices.forEach(device => {\n      const marker = L.marker([device.location.lat, device.location.lon], {\n        icon: createCustomDeviceIcon(device.type, device.status, 32)\n      });\n      marker.bindPopup(`\n        <div style=\"min-width: 200px;\">\n          <h4 style=\"margin: 0 0 8px 0; color: #333;\">${device.type}</h4>\n          <p style=\"margin: 2px 0;\"><strong>ID:</strong> ${device.id}</p>\n          <p style=\"margin: 2px 0;\"><strong>Status:</strong> \n            <span style=\"color: ${device.status === 'online' ? '#4CAF50' : '#F44336'};\">\n              ${device.status}\n            </span>\n          </p>\n          <p style=\"margin: 2px 0;\"><strong>Network:</strong> ${device.networkType}</p>\n          <p style=\"margin: 2px 0;\"><strong>Battery:</strong> ${device.batteryLevel}%</p>\n          <button onclick=\"window.selectDevice('${device.id}')\" \n                  style=\"\n                    margin-top: 8px; \n                    padding: 4px 8px; \n                    background: #667eea; \n                    color: white; \n                    border: none; \n                    border-radius: 4px; \n                    cursor: pointer;\n                  \">\n            View Details\n          </button>\n        </div>\n      `);\n      marker.on('click', () => onDeviceClick(device.id));\n      marker.addTo(map);\n      markersRef.current.push(marker);\n    });\n\n    // Add edge node markers with enhanced design\n    edgeNodes.forEach(node => {\n      const marker = L.marker([node.location.lat, node.location.lon], {\n        icon: createEdgeNodeIcon(40)\n      });\n      marker.bindPopup(`\n        <div style=\"min-width: 200px;\">\n          <h4 style=\"margin: 0 0 8px 0; color: #333;\">Edge Computing Node</h4>\n          <p style=\"margin: 2px 0;\"><strong>ID:</strong> ${node.id}</p>\n          <p style=\"margin: 2px 0;\"><strong>Name:</strong> ${node.name || 'Unknown'}</p>\n          <p style=\"margin: 2px 0;\"><strong>Status:</strong> \n            <span style=\"color: ${node.status === 'online' ? '#4CAF50' : '#F44336'};\">\n              ${node.status}\n            </span>\n          </p>\n          <p style=\"margin: 2px 0;\"><strong>Connected Devices:</strong> ${node.connectedDevices}</p>\n        </div>\n      `);\n      marker.addTo(map);\n      markersRef.current.push(marker);\n    });\n\n    // Add alert markers with enhanced design\n    alerts.forEach(alert => {\n      if (alert.location) {\n        const marker = L.marker([alert.location.lat, alert.location.lon], {\n          icon: createAlertIcon(alert.severity, 32)\n        });\n        marker.bindPopup(`\n          <div style=\"min-width: 200px;\">\n            <h4 style=\"margin: 0 0 8px 0; color: #F44336;\">üö® Emergency Alert</h4>\n            <p style=\"margin: 2px 0;\"><strong>Type:</strong> ${alert.type}</p>\n            <p style=\"margin: 2px 0;\"><strong>Severity:</strong> \n              <span style=\"color: ${alert.severity === 'high' ? '#F44336' : '#FF9800'};\">\n                ${alert.severity}\n              </span>\n            </p>\n            <p style=\"margin: 2px 0;\"><strong>Description:</strong> ${alert.description}</p>\n            <p style=\"margin: 2px 0; font-size: 12px; color: #666;\">\n              ${new Date(alert.timestamp).toLocaleString()}\n            </p>\n          </div>\n        `);\n        marker.addTo(map);\n        markersRef.current.push(marker);\n      }\n    });\n    return () => {\n      markersRef.current.forEach(marker => {\n        map.removeLayer(marker);\n      });\n      markersRef.current = [];\n    };\n  }, [devices, edgeNodes, alerts, map, onDeviceClick]);\n  return null;\n}\n_s(MapUpdater, \"j9VJFnGgtxCyRgacboHTHsLik+8=\", false, function () {\n  return [useMap];\n});\n_c6 = MapUpdater;\nfunction CityMap({\n  devices = [],\n  edgeNodes = [],\n  emergencyAlerts = [],\n  onDeviceClick\n}) {\n  _s2();\n  const mapRef = useRef();\n\n  // Default center (NYC downtown area)\n  const defaultCenter = [40.7539, -73.9791];\n  const defaultZoom = 14;\n  useEffect(() => {\n    // Make device click handler globally available for popup buttons\n    window.selectDevice = onDeviceClick;\n    return () => {\n      delete window.selectDevice;\n    };\n  }, [onDeviceClick]);\n  const handleFitBounds = () => {\n    if (mapRef.current) {\n      const allLocations = [...devices.map(d => [d.location.lat, d.location.lon]), ...edgeNodes.map(n => [n.location.lat, n.location.lon])];\n      if (allLocations.length > 0) {\n        mapRef.current.fitBounds(allLocations, {\n          padding: [20, 20]\n        });\n      }\n    }\n  };\n  const handleResetView = () => {\n    if (mapRef.current) {\n      mapRef.current.setView(defaultCenter, defaultZoom);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(MapWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n      center: defaultCenter,\n      zoom: defaultZoom,\n      ref: mapRef,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      zoomControl: false,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapUpdater, {\n        devices: devices,\n        edgeNodes: edgeNodes,\n        alerts: emergencyAlerts,\n        onDeviceClick: onDeviceClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapControls, {\n      children: [/*#__PURE__*/_jsxDEV(ControlButton, {\n        onClick: handleFitBounds,\n        children: \"\\uD83D\\uDCCD Fit All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n        onClick: handleResetView,\n        children: \"\\uD83C\\uDFE0 Reset View\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: '0 0 8px 0',\n          fontSize: '14px'\n        },\n        children: \"Device Types\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), Object.entries(deviceTypeInfo).map(([type, info]) => /*#__PURE__*/_jsxDEV(LegendItem, {\n        color: info.color,\n        children: [info.icon, \" \", info.name]\n      }, type, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(LegendItem, {\n        color: \"#667eea\",\n        children: \"\\uD83C\\uDFE2 Edge Computing Nodes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), emergencyAlerts.length > 0 && /*#__PURE__*/_jsxDEV(LegendItem, {\n        color: \"#F44336\",\n        children: [\"\\u26A0\\uFE0F Active Alerts (\", emergencyAlerts.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n}\n_s2(CityMap, \"9mn7MMe4fPaZ50ApsOpRWF2HbFg=\");\n_c7 = CityMap;\nexport default CityMap;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"MapWrapper\");\n$RefreshReg$(_c2, \"MapControls\");\n$RefreshReg$(_c3, \"ControlButton\");\n$RefreshReg$(_c4, \"Legend\");\n$RefreshReg$(_c5, \"LegendItem\");\n$RefreshReg$(_c6, \"MapUpdater\");\n$RefreshReg$(_c7, \"CityMap\");","map":{"version":3,"names":["React","useEffect","useRef","MapContainer","TileLayer","useMap","L","styled","createCustomDeviceIcon","createEdgeNodeIcon","createAlertIcon","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapWrapper","div","_c","MapControls","_c2","ControlButton","button","_c3","Legend","_c4","LegendItem","props","color","_c5","deviceTypeInfo","CCTV","icon","name","TrafficSensor","WasteBinSensor","SmartStreetlight","PollutionSensor","WaterQualitySensor","NoiseSensor","ParkingSensor","MapUpdater","devices","edgeNodes","alerts","onDeviceClick","_s","map","markersRef","current","forEach","marker","removeLayer","device","location","lat","lon","type","status","bindPopup","id","networkType","batteryLevel","on","addTo","push","node","connectedDevices","alert","severity","description","Date","timestamp","toLocaleString","_c6","CityMap","emergencyAlerts","_s2","mapRef","defaultCenter","defaultZoom","window","selectDevice","handleFitBounds","allLocations","d","n","length","fitBounds","padding","handleResetView","setView","children","center","zoom","ref","style","height","width","zoomControl","attribution","url","fileName","_jsxFileName","lineNumber","columnNumber","onClick","margin","fontSize","Object","entries","info","_c7","$RefreshReg$"],"sources":["D:/smart_city_communication_hub/frontend/src/components/CityMap.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport styled from 'styled-components';\r\nimport { createCustomDeviceIcon, createEdgeNodeIcon, createAlertIcon } from './DeviceIcons';\r\n\r\n// Fix for default markers in React Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\nconst MapWrapper = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n\r\n  .leaflet-container {\r\n    height: 100%;\r\n    width: 100%;\r\n    background: #f0f2f5;\r\n  }\r\n`;\r\n\r\nconst MapControls = styled.div`\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  z-index: 1000;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ControlButton = styled.button`\r\n  padding: 8px 12px;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border: none;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  \r\n  &:hover {\r\n    background: rgba(255, 255, 255, 1);\r\n  }\r\n`;\r\n\r\nconst Legend = styled.div`\r\n  position: absolute;\r\n  bottom: 10px;\r\n  left: 10px;\r\n  z-index: 1000;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  font-size: 12px;\r\n  min-width: 200px;\r\n`;\r\n\r\nconst LegendItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 4px 0;\r\n  \r\n  &::before {\r\n    content: '';\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: ${props => props.color};\r\n    margin-right: 8px;\r\n  }\r\n`;\r\n\r\n// Enhanced legend with better visual representation\r\nconst deviceTypeInfo = {\r\n  CCTV: { color: '#4CAF50', icon: 'üìπ', name: 'CCTV Cameras' },\r\n  TrafficSensor: { color: '#2196F3', icon: 'üö¶', name: 'Traffic Sensors' },\r\n  WasteBinSensor: { color: '#9C27B0', icon: 'ÔøΩÔ∏è', name: 'Waste Bin Sensors' },\r\n  SmartStreetlight: { color: '#FFC107', icon: 'üí°', name: 'Smart Street Lights' },\r\n  PollutionSensor: { color: '#795548', icon: 'üå°Ô∏è', name: 'Pollution Sensors' },\r\n  WaterQualitySensor: { color: '#00BCD4', icon: 'üíß', name: 'Water Quality' },\r\n  NoiseSensor: { color: '#E91E63', icon: 'üîä', name: 'Noise Sensors' },\r\n  ParkingSensor: { color: '#3F51B5', icon: 'üÖøÔ∏è', name: 'Parking Sensors' },\r\n};\r\n\r\nfunction MapUpdater({ devices, edgeNodes, alerts, onDeviceClick }) {\r\n  const map = useMap();\r\n  const markersRef = useRef([]);\r\n\r\n  useEffect(() => {\r\n    // Clear existing markers\r\n    markersRef.current.forEach(marker => {\r\n      map.removeLayer(marker);\r\n    });\r\n    markersRef.current = [];\r\n\r\n    // Add device markers with enhanced custom icons\r\n    devices.forEach(device => {\r\n      const marker = L.marker(\r\n        [device.location.lat, device.location.lon],\r\n        { icon: createCustomDeviceIcon(device.type, device.status, 32) }\r\n      );\r\n\r\n      marker.bindPopup(`\r\n        <div style=\"min-width: 200px;\">\r\n          <h4 style=\"margin: 0 0 8px 0; color: #333;\">${device.type}</h4>\r\n          <p style=\"margin: 2px 0;\"><strong>ID:</strong> ${device.id}</p>\r\n          <p style=\"margin: 2px 0;\"><strong>Status:</strong> \r\n            <span style=\"color: ${device.status === 'online' ? '#4CAF50' : '#F44336'};\">\r\n              ${device.status}\r\n            </span>\r\n          </p>\r\n          <p style=\"margin: 2px 0;\"><strong>Network:</strong> ${device.networkType}</p>\r\n          <p style=\"margin: 2px 0;\"><strong>Battery:</strong> ${device.batteryLevel}%</p>\r\n          <button onclick=\"window.selectDevice('${device.id}')\" \r\n                  style=\"\r\n                    margin-top: 8px; \r\n                    padding: 4px 8px; \r\n                    background: #667eea; \r\n                    color: white; \r\n                    border: none; \r\n                    border-radius: 4px; \r\n                    cursor: pointer;\r\n                  \">\r\n            View Details\r\n          </button>\r\n        </div>\r\n      `);\r\n\r\n      marker.on('click', () => onDeviceClick(device.id));\r\n      marker.addTo(map);\r\n      markersRef.current.push(marker);\r\n    });\r\n\r\n    // Add edge node markers with enhanced design\r\n    edgeNodes.forEach(node => {\r\n      const marker = L.marker(\r\n        [node.location.lat, node.location.lon],\r\n        { icon: createEdgeNodeIcon(40) }\r\n      );\r\n\r\n      marker.bindPopup(`\r\n        <div style=\"min-width: 200px;\">\r\n          <h4 style=\"margin: 0 0 8px 0; color: #333;\">Edge Computing Node</h4>\r\n          <p style=\"margin: 2px 0;\"><strong>ID:</strong> ${node.id}</p>\r\n          <p style=\"margin: 2px 0;\"><strong>Name:</strong> ${node.name || 'Unknown'}</p>\r\n          <p style=\"margin: 2px 0;\"><strong>Status:</strong> \r\n            <span style=\"color: ${node.status === 'online' ? '#4CAF50' : '#F44336'};\">\r\n              ${node.status}\r\n            </span>\r\n          </p>\r\n          <p style=\"margin: 2px 0;\"><strong>Connected Devices:</strong> ${node.connectedDevices}</p>\r\n        </div>\r\n      `);\r\n\r\n      marker.addTo(map);\r\n      markersRef.current.push(marker);\r\n    });\r\n\r\n    // Add alert markers with enhanced design\r\n    alerts.forEach(alert => {\r\n      if (alert.location) {\r\n        const marker = L.marker(\r\n          [alert.location.lat, alert.location.lon],\r\n          { icon: createAlertIcon(alert.severity, 32) }\r\n        );\r\n\r\n        marker.bindPopup(`\r\n          <div style=\"min-width: 200px;\">\r\n            <h4 style=\"margin: 0 0 8px 0; color: #F44336;\">üö® Emergency Alert</h4>\r\n            <p style=\"margin: 2px 0;\"><strong>Type:</strong> ${alert.type}</p>\r\n            <p style=\"margin: 2px 0;\"><strong>Severity:</strong> \r\n              <span style=\"color: ${alert.severity === 'high' ? '#F44336' : '#FF9800'};\">\r\n                ${alert.severity}\r\n              </span>\r\n            </p>\r\n            <p style=\"margin: 2px 0;\"><strong>Description:</strong> ${alert.description}</p>\r\n            <p style=\"margin: 2px 0; font-size: 12px; color: #666;\">\r\n              ${new Date(alert.timestamp).toLocaleString()}\r\n            </p>\r\n          </div>\r\n        `);\r\n\r\n        marker.addTo(map);\r\n        markersRef.current.push(marker);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      markersRef.current.forEach(marker => {\r\n        map.removeLayer(marker);\r\n      });\r\n      markersRef.current = [];\r\n    };\r\n  }, [devices, edgeNodes, alerts, map, onDeviceClick]);\r\n\r\n  return null;\r\n}\r\n\r\nfunction CityMap({ devices = [], edgeNodes = [], emergencyAlerts = [], onDeviceClick }) {\r\n  const mapRef = useRef();\r\n\r\n  // Default center (NYC downtown area)\r\n  const defaultCenter = [40.7539, -73.9791];\r\n  const defaultZoom = 14;\r\n\r\n  useEffect(() => {\r\n    // Make device click handler globally available for popup buttons\r\n    window.selectDevice = onDeviceClick;\r\n    \r\n    return () => {\r\n      delete window.selectDevice;\r\n    };\r\n  }, [onDeviceClick]);\r\n\r\n  const handleFitBounds = () => {\r\n    if (mapRef.current) {\r\n      const allLocations = [\r\n        ...devices.map(d => [d.location.lat, d.location.lon]),\r\n        ...edgeNodes.map(n => [n.location.lat, n.location.lon])\r\n      ];\r\n      \r\n      if (allLocations.length > 0) {\r\n        mapRef.current.fitBounds(allLocations, { padding: [20, 20] });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleResetView = () => {\r\n    if (mapRef.current) {\r\n      mapRef.current.setView(defaultCenter, defaultZoom);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MapWrapper>\r\n      <MapContainer\r\n        center={defaultCenter}\r\n        zoom={defaultZoom}\r\n        ref={mapRef}\r\n        style={{ height: '100%', width: '100%' }}\r\n        zoomControl={false}\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        \r\n        <MapUpdater\r\n          devices={devices}\r\n          edgeNodes={edgeNodes}\r\n          alerts={emergencyAlerts}\r\n          onDeviceClick={onDeviceClick}\r\n        />\r\n      </MapContainer>\r\n\r\n      <MapControls>\r\n        <ControlButton onClick={handleFitBounds}>\r\n          üìç Fit All\r\n        </ControlButton>\r\n        <ControlButton onClick={handleResetView}>\r\n          üè† Reset View\r\n        </ControlButton>\r\n      </MapControls>\r\n\r\n      <Legend>\r\n        <h4 style={{ margin: '0 0 8px 0', fontSize: '14px' }}>Device Types</h4>\r\n        {Object.entries(deviceTypeInfo).map(([type, info]) => (\r\n          <LegendItem key={type} color={info.color}>\r\n            {info.icon} {info.name}\r\n          </LegendItem>\r\n        ))}\r\n        <LegendItem color=\"#667eea\">üè¢ Edge Computing Nodes</LegendItem>\r\n        {emergencyAlerts.length > 0 && (\r\n          <LegendItem color=\"#F44336\">‚ö†Ô∏è Active Alerts ({emergencyAlerts.length})</LegendItem>\r\n        )}\r\n      </Legend>\r\n    </MapWrapper>\r\n  );\r\n}\r\n\r\nexport default CityMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}